---
import Button from "../ui/button/Button.astro";
import { projects } from "../../data/projects";

interface Props {
  title?: string;
}

const { title } = Astro.props as Props;
---

<section class="w-full py-12">
  <div class="mx-auto max-w-6xl px-4">

    {title && (
      <h2 class="text-3xl md:text-4xl font-semibold text-center mb-12 text-foreground">
        {title}
      </h2>
    )}

    <div class="flex flex-col gap-8">
      {projects.map((p) => (
        <article class="card-surface p-6 md:p-8 relative overflow-hidden">

          {/* LOGO DEL CLIENTE (esquina superior) */}
          {p.icon && (
            <img
              src={p.icon}
              alt={`${p.title} logo`}
              class="absolute right-6 top-6
         w-12 h-12
         object-contain
         opacity-90
         pointer-events-none"
              loading="lazy"
            />
          )}

          {/* TÍTULO */}
          <h3 class="text-xl md:text-2xl font-semibold text-foreground m-0">
            {p.title}
          </h3>

          {/* STACK / CONTEXTO */}
          {p.techStack && (
            <p class="mt-1 text-sm text-[color:var(--color-text-muted)]">
              {p.techStack}
            </p>
          )}

          {/* DESCRIPCIÓN */}
          <p class="mt-4 text-[color:var(--color-text-secondary)] max-w-3xl">
            {p.description}
          </p>

          {/* DASHBOARD / IMAGEN PRINCIPAL */}
          {p.image && (
            <div class="mt-6">
              <img
                src={p.image}
                alt={`Dashboard ${p.title}`}
                class="w-full max-w-5xl rounded-xl border border-white/5 shadow-lg"
                loading="lazy"
              />
            </div>
          )}

          {/* CTA */}
          {p.ctaText && p.ctaLink && (
            <div class="mt-8">
              <Button href={p.ctaLink} variant="secondary" size="sm">
                {p.ctaText}
              </Button>
            </div>
          )}

        </article>
      ))}
    </div>

  </div>
</section>
